{"abi":[{"type":"error","name":"InvalidShortString","inputs":[]},{"type":"error","name":"StringTooLong","inputs":[{"name":"str","type":"string","internalType":"string"}]}],"bytecode":{"object":"0x6055604b600b8282823980515f1a607314603f577f4e487b71000000000000000000000000000000000000000000000000000000005f525f60045260245ffd5b305f52607381538281f3fe730000000000000000000000000000000000000000301460806040525f80fdfea26469706673582212207b86204da0856bf0e4708614e27a903b1dcbb74de5d8d1fa22f4c9d1f352128364736f6c634300081a0033","sourceMap":"1255:3026:33:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x730000000000000000000000000000000000000000301460806040525f80fdfea26469706673582212207b86204da0856bf0e4708614e27a903b1dcbb74de5d8d1fa22f4c9d1f352128364736f6c634300081a0033","sourceMap":"1255:3026:33:-:0;;;;;;;;","linkReferences":{}},"methodIdentifiers":{},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.26+commit.8a97fa7a\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"InvalidShortString\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"str\",\"type\":\"string\"}],\"name\":\"StringTooLong\",\"type\":\"error\"}],\"devdoc\":{\"details\":\"This library provides functions to convert short memory strings into a `ShortString` type that can be used as an immutable variable. Strings of arbitrary length can be optimized using this library if they are short enough (up to 31 bytes) by packing them with their length (1 byte) in a single EVM word (32 bytes). Additionally, a fallback mechanism can be used for every other case. Usage example: ```solidity contract Named {     using ShortStrings for *;     ShortString private immutable _name;     string private _nameFallback;     constructor(string memory contractName) {         _name = contractName.toShortStringWithFallback(_nameFallback);     }     function name() external view returns (string memory) {         return _name.toStringWithFallback(_nameFallback);     } } ```\",\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"lib/openzeppelin-contracts/contracts/utils/ShortStrings.sol\":\"ShortStrings\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":false,\"runs\":200},\"remappings\":[\":@ensdomains/=lib/v4-core/node_modules/@ensdomains/\",\":@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/\",\":@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/\",\":@uniswap/v4-core/=lib/v4-periphery/lib/v4-core/\",\":ds-test/=lib/v4-core/lib/forge-std/lib/ds-test/src/\",\":erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/\",\":forge-gas-snapshot/=lib/v4-periphery/lib/permit2/lib/forge-gas-snapshot/src/\",\":forge-std/=lib/forge-std/src/\",\":halmos-cheatcodes/=lib/openzeppelin-contracts-upgradeable/lib/halmos-cheatcodes/src/\",\":hardhat/=lib/v4-core/node_modules/hardhat/\",\":openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":openzeppelin-foundry-upgrades/=lib/openzeppelin-foundry-upgrades/src/\",\":permit2/=lib/v4-periphery/lib/permit2/\",\":solmate/=lib/v4-core/lib/solmate/\",\":v4-core/=lib/v4-core/src/\",\":v4-periphery/=lib/v4-periphery/src/\"]},\"sources\":{\"lib/openzeppelin-contracts/contracts/utils/ShortStrings.sol\":{\"keccak256\":\"0x7d94fa0af099a2172eb01f9c8a8a443cbe7e0e43654841563e4e09968efdb549\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://65e38fb76b6add407d4557753ae83dd1268e8261195dbe5c19a580d5ba6e4e9a\",\"dweb:/ipfs/QmTkGSJtaQrqjcyWM4AgemeEmKgtDydKPPVRajsUJRQSrK\"]},\"lib/openzeppelin-contracts/contracts/utils/StorageSlot.sol\":{\"keccak256\":\"0xcf74f855663ce2ae00ed8352666b7935f6cddea2932fdf2c3ecd30a9b1cd0e97\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://9f660b1f351b757dfe01438e59888f31f33ded3afcf5cb5b0d9bf9aa6f320a8b\",\"dweb:/ipfs/QmarDJ5hZEgBtCmmrVzEZWjub9769eD686jmzb2XpSU1cM\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.26+commit.8a97fa7a"},"language":"Solidity","output":{"abi":[{"inputs":[],"type":"error","name":"InvalidShortString"},{"inputs":[{"internalType":"string","name":"str","type":"string"}],"type":"error","name":"StringTooLong"}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["@ensdomains/=lib/v4-core/node_modules/@ensdomains/","@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/","@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/","@uniswap/v4-core/=lib/v4-periphery/lib/v4-core/","ds-test/=lib/v4-core/lib/forge-std/lib/ds-test/src/","erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/","forge-gas-snapshot/=lib/v4-periphery/lib/permit2/lib/forge-gas-snapshot/src/","forge-std/=lib/forge-std/src/","halmos-cheatcodes/=lib/openzeppelin-contracts-upgradeable/lib/halmos-cheatcodes/src/","hardhat/=lib/v4-core/node_modules/hardhat/","openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/","openzeppelin-contracts/=lib/openzeppelin-contracts/","openzeppelin-foundry-upgrades/=lib/openzeppelin-foundry-upgrades/src/","permit2/=lib/v4-periphery/lib/permit2/","solmate/=lib/v4-core/lib/solmate/","v4-core/=lib/v4-core/src/","v4-periphery/=lib/v4-periphery/src/"],"optimizer":{"enabled":false,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"lib/openzeppelin-contracts/contracts/utils/ShortStrings.sol":"ShortStrings"},"evmVersion":"cancun","libraries":{}},"sources":{"lib/openzeppelin-contracts/contracts/utils/ShortStrings.sol":{"keccak256":"0x7d94fa0af099a2172eb01f9c8a8a443cbe7e0e43654841563e4e09968efdb549","urls":["bzz-raw://65e38fb76b6add407d4557753ae83dd1268e8261195dbe5c19a580d5ba6e4e9a","dweb:/ipfs/QmTkGSJtaQrqjcyWM4AgemeEmKgtDydKPPVRajsUJRQSrK"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/StorageSlot.sol":{"keccak256":"0xcf74f855663ce2ae00ed8352666b7935f6cddea2932fdf2c3ecd30a9b1cd0e97","urls":["bzz-raw://9f660b1f351b757dfe01438e59888f31f33ded3afcf5cb5b0d9bf9aa6f320a8b","dweb:/ipfs/QmarDJ5hZEgBtCmmrVzEZWjub9769eD686jmzb2XpSU1cM"],"license":"MIT"}},"version":1},"storageLayout":{"storage":[],"types":{}},"ast":{"absolutePath":"lib/openzeppelin-contracts/contracts/utils/ShortStrings.sol","id":41115,"exportedSymbols":{"ShortString":[40903],"ShortStrings":[41114],"StorageSlot":[41238]},"nodeType":"SourceUnit","src":"106:4176:33","nodes":[{"id":40899,"nodeType":"PragmaDirective","src":"106:24:33","nodes":[],"literals":["solidity","^","0.8",".20"]},{"id":40901,"nodeType":"ImportDirective","src":"132:46:33","nodes":[],"absolutePath":"lib/openzeppelin-contracts/contracts/utils/StorageSlot.sol","file":"./StorageSlot.sol","nameLocation":"-1:-1:-1","scope":41115,"sourceUnit":41239,"symbolAliases":[{"foreign":{"id":40900,"name":"StorageSlot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41238,"src":"140:11:33","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":40903,"nodeType":"UserDefinedValueTypeDefinition","src":"348:28:33","nodes":[],"canonicalName":"ShortString","name":"ShortString","nameLocation":"353:11:33","underlyingType":{"id":40902,"name":"bytes32","nodeType":"ElementaryTypeName","src":"368:7:33","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}},{"id":41114,"nodeType":"ContractDefinition","src":"1255:3026:33","nodes":[{"id":40907,"nodeType":"VariableDeclaration","src":"1345:111:33","nodes":[],"constant":true,"mutability":"constant","name":"FALLBACK_SENTINEL","nameLocation":"1370:17:33","scope":41114,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":40905,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1345:7:33","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":{"hexValue":"307830303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030303030304646","id":40906,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1390:66:33","typeDescriptions":{"typeIdentifier":"t_rational_255_by_1","typeString":"int_const 255"},"value":"0x00000000000000000000000000000000000000000000000000000000000000FF"},"visibility":"private"},{"id":40911,"nodeType":"ErrorDefinition","src":"1463:32:33","nodes":[],"errorSelector":"305a27a9","name":"StringTooLong","nameLocation":"1469:13:33","parameters":{"id":40910,"nodeType":"ParameterList","parameters":[{"constant":false,"id":40909,"mutability":"mutable","name":"str","nameLocation":"1490:3:33","nodeType":"VariableDeclaration","scope":40911,"src":"1483:10:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string"},"typeName":{"id":40908,"name":"string","nodeType":"ElementaryTypeName","src":"1483:6:33","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"1482:12:33"}},{"id":40913,"nodeType":"ErrorDefinition","src":"1500:27:33","nodes":[],"errorSelector":"b3512b0c","name":"InvalidShortString","nameLocation":"1506:18:33","parameters":{"id":40912,"nodeType":"ParameterList","parameters":[],"src":"1524:2:33"}},{"id":40957,"nodeType":"FunctionDefinition","src":"1708:286:33","nodes":[],"body":{"id":40956,"nodeType":"Block","src":"1786:208:33","nodes":[],"statements":[{"assignments":[40923],"declarations":[{"constant":false,"id":40923,"mutability":"mutable","name":"bstr","nameLocation":"1809:4:33","nodeType":"VariableDeclaration","scope":40956,"src":"1796:17:33","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes"},"typeName":{"id":40922,"name":"bytes","nodeType":"ElementaryTypeName","src":"1796:5:33","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"internal"}],"id":40928,"initialValue":{"arguments":[{"id":40926,"name":"str","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40916,"src":"1822:3:33","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}],"id":40925,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"1816:5:33","typeDescriptions":{"typeIdentifier":"t_type$_t_bytes_storage_ptr_$","typeString":"type(bytes storage pointer)"},"typeName":{"id":40924,"name":"bytes","nodeType":"ElementaryTypeName","src":"1816:5:33","typeDescriptions":{}}},"id":40927,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1816:10:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}},"nodeType":"VariableDeclarationStatement","src":"1796:30:33"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":40932,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":40929,"name":"bstr","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40923,"src":"1840:4:33","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}},"id":40930,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1845:6:33","memberName":"length","nodeType":"MemberAccess","src":"1840:11:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"3331","id":40931,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1854:2:33","typeDescriptions":{"typeIdentifier":"t_rational_31_by_1","typeString":"int_const 31"},"value":"31"},"src":"1840:16:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":40938,"nodeType":"IfStatement","src":"1836:72:33","trueBody":{"id":40937,"nodeType":"Block","src":"1858:50:33","statements":[{"errorCall":{"arguments":[{"id":40934,"name":"str","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40916,"src":"1893:3:33","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}],"id":40933,"name":"StringTooLong","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40911,"src":"1879:13:33","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_string_memory_ptr_$returns$_t_error_$","typeString":"function (string memory) pure returns (error)"}},"id":40935,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1879:18:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":40936,"nodeType":"RevertStatement","src":"1872:25:33"}]}},{"expression":{"arguments":[{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":40952,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"arguments":[{"id":40947,"name":"bstr","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40923,"src":"1965:4:33","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}],"id":40946,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"1957:7:33","typeDescriptions":{"typeIdentifier":"t_type$_t_bytes32_$","typeString":"type(bytes32)"},"typeName":{"id":40945,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1957:7:33","typeDescriptions":{}}},"id":40948,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1957:13:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":40944,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"1949:7:33","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":40943,"name":"uint256","nodeType":"ElementaryTypeName","src":"1949:7:33","typeDescriptions":{}}},"id":40949,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1949:22:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"|","rightExpression":{"expression":{"id":40950,"name":"bstr","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40923,"src":"1974:4:33","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}},"id":40951,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1979:6:33","memberName":"length","nodeType":"MemberAccess","src":"1974:11:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1949:36:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":40942,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"1941:7:33","typeDescriptions":{"typeIdentifier":"t_type$_t_bytes32_$","typeString":"type(bytes32)"},"typeName":{"id":40941,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1941:7:33","typeDescriptions":{}}},"id":40953,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1941:45:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"id":40939,"name":"ShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40903,"src":"1924:11:33","typeDescriptions":{"typeIdentifier":"t_type$_t_userDefinedValueType$_ShortString_$40903_$","typeString":"type(ShortString)"}},"id":40940,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"1936:4:33","memberName":"wrap","nodeType":"MemberAccess","src":"1924:16:33","typeDescriptions":{"typeIdentifier":"t_function_wrap_pure$_t_bytes32_$returns$_t_userDefinedValueType$_ShortString_$40903_$","typeString":"function (bytes32) pure returns (ShortString)"}},"id":40954,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1924:63:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}},"functionReturnParameters":40921,"id":40955,"nodeType":"Return","src":"1917:70:33"}]},"documentation":{"id":40914,"nodeType":"StructuredDocumentation","src":"1533:170:33","text":" @dev Encode a string of at most 31 chars into a `ShortString`.\n This will trigger a `StringTooLong` error is the input string is too long."},"implemented":true,"kind":"function","modifiers":[],"name":"toShortString","nameLocation":"1717:13:33","parameters":{"id":40917,"nodeType":"ParameterList","parameters":[{"constant":false,"id":40916,"mutability":"mutable","name":"str","nameLocation":"1745:3:33","nodeType":"VariableDeclaration","scope":40957,"src":"1731:17:33","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string"},"typeName":{"id":40915,"name":"string","nodeType":"ElementaryTypeName","src":"1731:6:33","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"1730:19:33"},"returnParameters":{"id":40921,"nodeType":"ParameterList","parameters":[{"constant":false,"id":40920,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":40957,"src":"1773:11:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"},"typeName":{"id":40919,"nodeType":"UserDefinedTypeName","pathNode":{"id":40918,"name":"ShortString","nameLocations":["1773:11:33"],"nodeType":"IdentifierPath","referencedDeclaration":40903,"src":"1773:11:33"},"referencedDeclaration":40903,"src":"1773:11:33","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}},"visibility":"internal"}],"src":"1772:13:33"},"scope":41114,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":40983,"nodeType":"FunctionDefinition","src":"2078:378:33","nodes":[],"body":{"id":40982,"nodeType":"Block","src":"2152:304:33","nodes":[],"statements":[{"assignments":[40967],"declarations":[{"constant":false,"id":40967,"mutability":"mutable","name":"len","nameLocation":"2170:3:33","nodeType":"VariableDeclaration","scope":40982,"src":"2162:11:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":40966,"name":"uint256","nodeType":"ElementaryTypeName","src":"2162:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":40971,"initialValue":{"arguments":[{"id":40969,"name":"sstr","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40961,"src":"2187:4:33","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}],"id":40968,"name":"byteLength","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41015,"src":"2176:10:33","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_userDefinedValueType$_ShortString_$40903_$returns$_t_uint256_$","typeString":"function (ShortString) pure returns (uint256)"}},"id":40970,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2176:16:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2162:30:33"},{"assignments":[40973],"declarations":[{"constant":false,"id":40973,"mutability":"mutable","name":"str","nameLocation":"2294:3:33","nodeType":"VariableDeclaration","scope":40982,"src":"2280:17:33","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string"},"typeName":{"id":40972,"name":"string","nodeType":"ElementaryTypeName","src":"2280:6:33","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"id":40978,"initialValue":{"arguments":[{"hexValue":"3332","id":40976,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2311:2:33","typeDescriptions":{"typeIdentifier":"t_rational_32_by_1","typeString":"int_const 32"},"value":"32"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_32_by_1","typeString":"int_const 32"}],"id":40975,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"NewExpression","src":"2300:10:33","typeDescriptions":{"typeIdentifier":"t_function_objectcreation_pure$_t_uint256_$returns$_t_string_memory_ptr_$","typeString":"function (uint256) pure returns (string memory)"},"typeName":{"id":40974,"name":"string","nodeType":"ElementaryTypeName","src":"2304:6:33","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}}},"id":40977,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2300:14:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}},"nodeType":"VariableDeclarationStatement","src":"2280:34:33"},{"AST":{"nativeSrc":"2349:81:33","nodeType":"YulBlock","src":"2349:81:33","statements":[{"expression":{"arguments":[{"name":"str","nativeSrc":"2370:3:33","nodeType":"YulIdentifier","src":"2370:3:33"},{"name":"len","nativeSrc":"2375:3:33","nodeType":"YulIdentifier","src":"2375:3:33"}],"functionName":{"name":"mstore","nativeSrc":"2363:6:33","nodeType":"YulIdentifier","src":"2363:6:33"},"nativeSrc":"2363:16:33","nodeType":"YulFunctionCall","src":"2363:16:33"},"nativeSrc":"2363:16:33","nodeType":"YulExpressionStatement","src":"2363:16:33"},{"expression":{"arguments":[{"arguments":[{"name":"str","nativeSrc":"2403:3:33","nodeType":"YulIdentifier","src":"2403:3:33"},{"kind":"number","nativeSrc":"2408:4:33","nodeType":"YulLiteral","src":"2408:4:33","type":"","value":"0x20"}],"functionName":{"name":"add","nativeSrc":"2399:3:33","nodeType":"YulIdentifier","src":"2399:3:33"},"nativeSrc":"2399:14:33","nodeType":"YulFunctionCall","src":"2399:14:33"},{"name":"sstr","nativeSrc":"2415:4:33","nodeType":"YulIdentifier","src":"2415:4:33"}],"functionName":{"name":"mstore","nativeSrc":"2392:6:33","nodeType":"YulIdentifier","src":"2392:6:33"},"nativeSrc":"2392:28:33","nodeType":"YulFunctionCall","src":"2392:28:33"},"nativeSrc":"2392:28:33","nodeType":"YulExpressionStatement","src":"2392:28:33"}]},"evmVersion":"cancun","externalReferences":[{"declaration":40967,"isOffset":false,"isSlot":false,"src":"2375:3:33","valueSize":1},{"declaration":40961,"isOffset":false,"isSlot":false,"src":"2415:4:33","valueSize":1},{"declaration":40973,"isOffset":false,"isSlot":false,"src":"2370:3:33","valueSize":1},{"declaration":40973,"isOffset":false,"isSlot":false,"src":"2403:3:33","valueSize":1}],"flags":["memory-safe"],"id":40979,"nodeType":"InlineAssembly","src":"2324:106:33"},{"expression":{"id":40980,"name":"str","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40973,"src":"2446:3:33","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}},"functionReturnParameters":40965,"id":40981,"nodeType":"Return","src":"2439:10:33"}]},"documentation":{"id":40958,"nodeType":"StructuredDocumentation","src":"2000:73:33","text":" @dev Decode a `ShortString` back to a \"normal\" string."},"implemented":true,"kind":"function","modifiers":[],"name":"toString","nameLocation":"2087:8:33","parameters":{"id":40962,"nodeType":"ParameterList","parameters":[{"constant":false,"id":40961,"mutability":"mutable","name":"sstr","nameLocation":"2108:4:33","nodeType":"VariableDeclaration","scope":40983,"src":"2096:16:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"},"typeName":{"id":40960,"nodeType":"UserDefinedTypeName","pathNode":{"id":40959,"name":"ShortString","nameLocations":["2096:11:33"],"nodeType":"IdentifierPath","referencedDeclaration":40903,"src":"2096:11:33"},"referencedDeclaration":40903,"src":"2096:11:33","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}},"visibility":"internal"}],"src":"2095:18:33"},"returnParameters":{"id":40965,"nodeType":"ParameterList","parameters":[{"constant":false,"id":40964,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":40983,"src":"2137:13:33","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string"},"typeName":{"id":40963,"name":"string","nodeType":"ElementaryTypeName","src":"2137:6:33","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"2136:15:33"},"scope":41114,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":41015,"nodeType":"FunctionDefinition","src":"2528:245:33","nodes":[],"body":{"id":41014,"nodeType":"Block","src":"2598:175:33","nodes":[],"statements":[{"assignments":[40993],"declarations":[{"constant":false,"id":40993,"mutability":"mutable","name":"result","nameLocation":"2616:6:33","nodeType":"VariableDeclaration","scope":41014,"src":"2608:14:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":40992,"name":"uint256","nodeType":"ElementaryTypeName","src":"2608:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":41003,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":41002,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"arguments":[{"id":40998,"name":"sstr","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40987,"src":"2652:4:33","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}],"expression":{"id":40996,"name":"ShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40903,"src":"2633:11:33","typeDescriptions":{"typeIdentifier":"t_type$_t_userDefinedValueType$_ShortString_$40903_$","typeString":"type(ShortString)"}},"id":40997,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"2645:6:33","memberName":"unwrap","nodeType":"MemberAccess","src":"2633:18:33","typeDescriptions":{"typeIdentifier":"t_function_unwrap_pure$_t_userDefinedValueType$_ShortString_$40903_$returns$_t_bytes32_$","typeString":"function (ShortString) pure returns (bytes32)"}},"id":40999,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2633:24:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":40995,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"2625:7:33","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":40994,"name":"uint256","nodeType":"ElementaryTypeName","src":"2625:7:33","typeDescriptions":{}}},"id":41000,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2625:33:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"&","rightExpression":{"hexValue":"30784646","id":41001,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2661:4:33","typeDescriptions":{"typeIdentifier":"t_rational_255_by_1","typeString":"int_const 255"},"value":"0xFF"},"src":"2625:40:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2608:57:33"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":41006,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":41004,"name":"result","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40993,"src":"2679:6:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"3331","id":41005,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2688:2:33","typeDescriptions":{"typeIdentifier":"t_rational_31_by_1","typeString":"int_const 31"},"value":"31"},"src":"2679:11:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":41011,"nodeType":"IfStatement","src":"2675:69:33","trueBody":{"id":41010,"nodeType":"Block","src":"2692:52:33","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":41007,"name":"InvalidShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40913,"src":"2713:18:33","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":41008,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2713:20:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":41009,"nodeType":"RevertStatement","src":"2706:27:33"}]}},{"expression":{"id":41012,"name":"result","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40993,"src":"2760:6:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":40991,"id":41013,"nodeType":"Return","src":"2753:13:33"}]},"documentation":{"id":40984,"nodeType":"StructuredDocumentation","src":"2462:61:33","text":" @dev Return the length of a `ShortString`."},"implemented":true,"kind":"function","modifiers":[],"name":"byteLength","nameLocation":"2537:10:33","parameters":{"id":40988,"nodeType":"ParameterList","parameters":[{"constant":false,"id":40987,"mutability":"mutable","name":"sstr","nameLocation":"2560:4:33","nodeType":"VariableDeclaration","scope":41015,"src":"2548:16:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"},"typeName":{"id":40986,"nodeType":"UserDefinedTypeName","pathNode":{"id":40985,"name":"ShortString","nameLocations":["2548:11:33"],"nodeType":"IdentifierPath","referencedDeclaration":40903,"src":"2548:11:33"},"referencedDeclaration":40903,"src":"2548:11:33","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}},"visibility":"internal"}],"src":"2547:18:33"},"returnParameters":{"id":40991,"nodeType":"ParameterList","parameters":[{"constant":false,"id":40990,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":41015,"src":"2589:7:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":40989,"name":"uint256","nodeType":"ElementaryTypeName","src":"2589:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"2588:9:33"},"scope":41114,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":41055,"nodeType":"FunctionDefinition","src":"2887:340:33","nodes":[],"body":{"id":41054,"nodeType":"Block","src":"2996:231:33","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":41032,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"arguments":[{"id":41028,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41018,"src":"3016:5:33","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}],"id":41027,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3010:5:33","typeDescriptions":{"typeIdentifier":"t_type$_t_bytes_storage_ptr_$","typeString":"type(bytes storage pointer)"},"typeName":{"id":41026,"name":"bytes","nodeType":"ElementaryTypeName","src":"3010:5:33","typeDescriptions":{}}},"id":41029,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3010:12:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes memory"}},"id":41030,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3023:6:33","memberName":"length","nodeType":"MemberAccess","src":"3010:19:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"hexValue":"3332","id":41031,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3032:2:33","typeDescriptions":{"typeIdentifier":"t_rational_32_by_1","typeString":"int_const 32"},"value":"32"},"src":"3010:24:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":41052,"nodeType":"Block","src":"3094:127:33","statements":[{"expression":{"id":41045,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"expression":{"arguments":[{"id":41041,"name":"store","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41020,"src":"3134:5:33","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string storage pointer"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_string_storage_ptr","typeString":"string storage pointer"}],"expression":{"id":41038,"name":"StorageSlot","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41238,"src":"3108:11:33","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_StorageSlot_$41238_$","typeString":"type(library StorageSlot)"}},"id":41040,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3120:13:33","memberName":"getStringSlot","nodeType":"MemberAccess","referencedDeclaration":41215,"src":"3108:25:33","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_string_storage_ptr_$returns$_t_struct$_StringSlot_$41135_storage_ptr_$","typeString":"function (string storage pointer) pure returns (struct StorageSlot.StringSlot storage pointer)"}},"id":41042,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3108:32:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_struct$_StringSlot_$41135_storage_ptr","typeString":"struct StorageSlot.StringSlot storage pointer"}},"id":41043,"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"memberLocation":"3141:5:33","memberName":"value","nodeType":"MemberAccess","referencedDeclaration":41134,"src":"3108:38:33","typeDescriptions":{"typeIdentifier":"t_string_storage","typeString":"string storage ref"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":41044,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41018,"src":"3149:5:33","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}},"src":"3108:46:33","typeDescriptions":{"typeIdentifier":"t_string_storage","typeString":"string storage ref"}},"id":41046,"nodeType":"ExpressionStatement","src":"3108:46:33"},{"expression":{"arguments":[{"id":41049,"name":"FALLBACK_SENTINEL","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40907,"src":"3192:17:33","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"expression":{"id":41047,"name":"ShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40903,"src":"3175:11:33","typeDescriptions":{"typeIdentifier":"t_type$_t_userDefinedValueType$_ShortString_$40903_$","typeString":"type(ShortString)"}},"id":41048,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3187:4:33","memberName":"wrap","nodeType":"MemberAccess","src":"3175:16:33","typeDescriptions":{"typeIdentifier":"t_function_wrap_pure$_t_bytes32_$returns$_t_userDefinedValueType$_ShortString_$40903_$","typeString":"function (bytes32) pure returns (ShortString)"}},"id":41050,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3175:35:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}},"functionReturnParameters":41025,"id":41051,"nodeType":"Return","src":"3168:42:33"}]},"id":41053,"nodeType":"IfStatement","src":"3006:215:33","trueBody":{"id":41037,"nodeType":"Block","src":"3036:52:33","statements":[{"expression":{"arguments":[{"id":41034,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41018,"src":"3071:5:33","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}],"id":41033,"name":"toShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40957,"src":"3057:13:33","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_string_memory_ptr_$returns$_t_userDefinedValueType$_ShortString_$40903_$","typeString":"function (string memory) pure returns (ShortString)"}},"id":41035,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3057:20:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}},"functionReturnParameters":41025,"id":41036,"nodeType":"Return","src":"3050:27:33"}]}}]},"documentation":{"id":41016,"nodeType":"StructuredDocumentation","src":"2779:103:33","text":" @dev Encode a string into a `ShortString`, or write it to storage if it is too long."},"implemented":true,"kind":"function","modifiers":[],"name":"toShortStringWithFallback","nameLocation":"2896:25:33","parameters":{"id":41021,"nodeType":"ParameterList","parameters":[{"constant":false,"id":41018,"mutability":"mutable","name":"value","nameLocation":"2936:5:33","nodeType":"VariableDeclaration","scope":41055,"src":"2922:19:33","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string"},"typeName":{"id":41017,"name":"string","nodeType":"ElementaryTypeName","src":"2922:6:33","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"},{"constant":false,"id":41020,"mutability":"mutable","name":"store","nameLocation":"2958:5:33","nodeType":"VariableDeclaration","scope":41055,"src":"2943:20:33","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"},"typeName":{"id":41019,"name":"string","nodeType":"ElementaryTypeName","src":"2943:6:33","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"2921:43:33"},"returnParameters":{"id":41025,"nodeType":"ParameterList","parameters":[{"constant":false,"id":41024,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":41055,"src":"2983:11:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"},"typeName":{"id":41023,"nodeType":"UserDefinedTypeName","pathNode":{"id":41022,"name":"ShortString","nameLocations":["2983:11:33"],"nodeType":"IdentifierPath","referencedDeclaration":40903,"src":"2983:11:33"},"referencedDeclaration":40903,"src":"2983:11:33","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}},"visibility":"internal"}],"src":"2982:13:33"},"scope":41114,"stateMutability":"nonpayable","virtual":false,"visibility":"internal"},{"id":41082,"nodeType":"FunctionDefinition","src":"3358:267:33","nodes":[],"body":{"id":41081,"nodeType":"Block","src":"3467:158:33","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"id":41071,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":41068,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41059,"src":"3500:5:33","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}],"expression":{"id":41066,"name":"ShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40903,"src":"3481:11:33","typeDescriptions":{"typeIdentifier":"t_type$_t_userDefinedValueType$_ShortString_$40903_$","typeString":"type(ShortString)"}},"id":41067,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"3493:6:33","memberName":"unwrap","nodeType":"MemberAccess","src":"3481:18:33","typeDescriptions":{"typeIdentifier":"t_function_unwrap_pure$_t_userDefinedValueType$_ShortString_$40903_$returns$_t_bytes32_$","typeString":"function (ShortString) pure returns (bytes32)"}},"id":41069,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3481:25:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":41070,"name":"FALLBACK_SENTINEL","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40907,"src":"3510:17:33","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"3481:46:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":41079,"nodeType":"Block","src":"3582:37:33","statements":[{"expression":{"id":41077,"name":"store","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41061,"src":"3603:5:33","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string storage pointer"}},"functionReturnParameters":41065,"id":41078,"nodeType":"Return","src":"3596:12:33"}]},"id":41080,"nodeType":"IfStatement","src":"3477:142:33","trueBody":{"id":41076,"nodeType":"Block","src":"3529:47:33","statements":[{"expression":{"arguments":[{"id":41073,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41059,"src":"3559:5:33","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}],"id":41072,"name":"toString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40983,"src":"3550:8:33","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_userDefinedValueType$_ShortString_$40903_$returns$_t_string_memory_ptr_$","typeString":"function (ShortString) pure returns (string memory)"}},"id":41074,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3550:15:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string memory"}},"functionReturnParameters":41065,"id":41075,"nodeType":"Return","src":"3543:22:33"}]}}]},"documentation":{"id":41056,"nodeType":"StructuredDocumentation","src":"3233:120:33","text":" @dev Decode a string that was encoded to `ShortString` or written to storage using {setWithFallback}."},"implemented":true,"kind":"function","modifiers":[],"name":"toStringWithFallback","nameLocation":"3367:20:33","parameters":{"id":41062,"nodeType":"ParameterList","parameters":[{"constant":false,"id":41059,"mutability":"mutable","name":"value","nameLocation":"3400:5:33","nodeType":"VariableDeclaration","scope":41082,"src":"3388:17:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"},"typeName":{"id":41058,"nodeType":"UserDefinedTypeName","pathNode":{"id":41057,"name":"ShortString","nameLocations":["3388:11:33"],"nodeType":"IdentifierPath","referencedDeclaration":40903,"src":"3388:11:33"},"referencedDeclaration":40903,"src":"3388:11:33","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}},"visibility":"internal"},{"constant":false,"id":41061,"mutability":"mutable","name":"store","nameLocation":"3422:5:33","nodeType":"VariableDeclaration","scope":41082,"src":"3407:20:33","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"},"typeName":{"id":41060,"name":"string","nodeType":"ElementaryTypeName","src":"3407:6:33","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"3387:41:33"},"returnParameters":{"id":41065,"nodeType":"ParameterList","parameters":[{"constant":false,"id":41064,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":41082,"src":"3452:13:33","stateVariable":false,"storageLocation":"memory","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string"},"typeName":{"id":41063,"name":"string","nodeType":"ElementaryTypeName","src":"3452:6:33","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"3451:15:33"},"scope":41114,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":41113,"nodeType":"FunctionDefinition","src":"4000:279:33","nodes":[],"body":{"id":41112,"nodeType":"Block","src":"4105:174:33","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"id":41098,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":41095,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41086,"src":"4138:5:33","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}],"expression":{"id":41093,"name":"ShortString","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40903,"src":"4119:11:33","typeDescriptions":{"typeIdentifier":"t_type$_t_userDefinedValueType$_ShortString_$40903_$","typeString":"type(ShortString)"}},"id":41094,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"4131:6:33","memberName":"unwrap","nodeType":"MemberAccess","src":"4119:18:33","typeDescriptions":{"typeIdentifier":"t_function_unwrap_pure$_t_userDefinedValueType$_ShortString_$40903_$returns$_t_bytes32_$","typeString":"function (ShortString) pure returns (bytes32)"}},"id":41096,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4119:25:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":41097,"name":"FALLBACK_SENTINEL","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40907,"src":"4148:17:33","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"4119:46:33","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":41110,"nodeType":"Block","src":"4222:51:33","statements":[{"expression":{"expression":{"arguments":[{"id":41106,"name":"store","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41088,"src":"4249:5:33","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string storage pointer"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_string_storage_ptr","typeString":"string storage pointer"}],"id":41105,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4243:5:33","typeDescriptions":{"typeIdentifier":"t_type$_t_bytes_storage_ptr_$","typeString":"type(bytes storage pointer)"},"typeName":{"id":41104,"name":"bytes","nodeType":"ElementaryTypeName","src":"4243:5:33","typeDescriptions":{}}},"id":41107,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4243:12:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes storage pointer"}},"id":41108,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4256:6:33","memberName":"length","nodeType":"MemberAccess","src":"4243:19:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":41092,"id":41109,"nodeType":"Return","src":"4236:26:33"}]},"id":41111,"nodeType":"IfStatement","src":"4115:158:33","trueBody":{"id":41103,"nodeType":"Block","src":"4167:49:33","statements":[{"expression":{"arguments":[{"id":41100,"name":"value","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41086,"src":"4199:5:33","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}],"id":41099,"name":"byteLength","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41015,"src":"4188:10:33","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_userDefinedValueType$_ShortString_$40903_$returns$_t_uint256_$","typeString":"function (ShortString) pure returns (uint256)"}},"id":41101,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4188:17:33","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":41092,"id":41102,"nodeType":"Return","src":"4181:24:33"}]}}]},"documentation":{"id":41083,"nodeType":"StructuredDocumentation","src":"3631:364:33","text":" @dev Return the length of a string that was encoded to `ShortString` or written to storage using\n {setWithFallback}.\n WARNING: This will return the \"byte length\" of the string. This may not reflect the actual length in terms of\n actual characters as the UTF-8 encoding of a single character can span over multiple bytes."},"implemented":true,"kind":"function","modifiers":[],"name":"byteLengthWithFallback","nameLocation":"4009:22:33","parameters":{"id":41089,"nodeType":"ParameterList","parameters":[{"constant":false,"id":41086,"mutability":"mutable","name":"value","nameLocation":"4044:5:33","nodeType":"VariableDeclaration","scope":41113,"src":"4032:17:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"},"typeName":{"id":41085,"nodeType":"UserDefinedTypeName","pathNode":{"id":41084,"name":"ShortString","nameLocations":["4032:11:33"],"nodeType":"IdentifierPath","referencedDeclaration":40903,"src":"4032:11:33"},"referencedDeclaration":40903,"src":"4032:11:33","typeDescriptions":{"typeIdentifier":"t_userDefinedValueType$_ShortString_$40903","typeString":"ShortString"}},"visibility":"internal"},{"constant":false,"id":41088,"mutability":"mutable","name":"store","nameLocation":"4066:5:33","nodeType":"VariableDeclaration","scope":41113,"src":"4051:20:33","stateVariable":false,"storageLocation":"storage","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"},"typeName":{"id":41087,"name":"string","nodeType":"ElementaryTypeName","src":"4051:6:33","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"4031:41:33"},"returnParameters":{"id":41092,"nodeType":"ParameterList","parameters":[{"constant":false,"id":41091,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":41113,"src":"4096:7:33","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":41090,"name":"uint256","nodeType":"ElementaryTypeName","src":"4096:7:33","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"4095:9:33"},"scope":41114,"stateMutability":"view","virtual":false,"visibility":"internal"}],"abstract":false,"baseContracts":[],"canonicalName":"ShortStrings","contractDependencies":[],"contractKind":"library","documentation":{"id":40904,"nodeType":"StructuredDocumentation","src":"378:876:33","text":" @dev This library provides functions to convert short memory strings\n into a `ShortString` type that can be used as an immutable variable.\n Strings of arbitrary length can be optimized using this library if\n they are short enough (up to 31 bytes) by packing them with their\n length (1 byte) in a single EVM word (32 bytes). Additionally, a\n fallback mechanism can be used for every other case.\n Usage example:\n ```solidity\n contract Named {\n     using ShortStrings for *;\n     ShortString private immutable _name;\n     string private _nameFallback;\n     constructor(string memory contractName) {\n         _name = contractName.toShortStringWithFallback(_nameFallback);\n     }\n     function name() external view returns (string memory) {\n         return _name.toStringWithFallback(_nameFallback);\n     }\n }\n ```"},"fullyImplemented":true,"linearizedBaseContracts":[41114],"name":"ShortStrings","nameLocation":"1263:12:33","scope":41115,"usedErrors":[40911,40913],"usedEvents":[]}],"license":"MIT"},"id":33}